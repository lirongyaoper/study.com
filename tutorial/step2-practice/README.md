# 💻 第2步：动手实践

> 🎯 **学习目标**：掌握SimpleTree类的核心方法，学会在代码中操作树形数据

## 📋 本步骤学习内容

### 📚 理论学习
1. **[03_核心方法.md](./03_核心方法.md)** - Tree类方法详解
   - 8个核心方法的功能和用法
   - 参数说明和返回值解析
   - 递归算法在树形结构中的应用

### 💻 实践练习
2. **[basic_usage.php](./basic_usage.php)** - 基础使用演示
   - 完整的使用示例和输出解析
   - 实际应用场景演示
   - 常见问题和解决方案

## ⏱️ 预计学习时间
**2-3小时**（包含动手实践时间）

## 🎯 学习路径

### Step 2.1：方法学习（60分钟）
```
📖 阅读 03_核心方法.md
├── init() - 数据初始化方法
├── getChildren() - 获取直接子节点
├── getParent() - 获取父节点
├── getAllDescendants() - 递归获取所有子孙节点
├── generateTreeText() - 生成树形文本
├── isLeaf() - 判断叶子节点
├── getRoots() - 获取根节点
└── getDepth() - 计算节点深度
```

### Step 2.2：代码实践（90分钟）
```
💻 运行 basic_usage.php
├── 第一遍：完整运行，观察所有输出
├── 第二遍：逐段运行，理解每个功能
├── 第三遍：修改数据，测试不同情况
└── 第四遍：尝试添加新功能
```

### Step 2.3：问题解决（30分钟）
```
🔧 调试练习
├── 故意制造错误数据，观察程序行为
├── 测试边界情况（空数据、单节点等）
├── 理解错误信息和异常处理
└── 学会使用printData()方法调试
```

## 💻 实践任务

### 任务1：基础运行
```bash
# 进入实践目录
cd tutorial/step2-practice/

# 运行基础示例
php basic_usage.php

# 仔细观察输出，理解每个部分的作用
```

### 任务2：代码修改实验
修改 `basic_usage.php` 中的数据，尝试以下实验：

1. **添加更多层级**：创建4-5层的组织结构
2. **测试空数据**：看看Tree类如何处理空数组
3. **测试单节点**：只有一个根节点的情况
4. **测试循环引用**：故意创建错误的父子关系

### 任务3：方法深入理解
对每个核心方法进行测试：

```php
<?php
require_once '../../library/core/SimpleTree.php';

// 使用你自己的测试数据
$test_data = array(
    // 在这里设计你的测试数据
);

$tree = new SimpleTree();
$tree->init($test_data);

// 测试每个方法
echo "=== 方法测试 ===\n";

// 1. 测试 getRoots()
$roots = $tree->getRoots();
echo "根节点数量: " . count($roots) . "\n";

// 2. 测试 getChildren()  
$children = $tree->getChildren(1);
echo "节点1的子节点数量: " . ($children ? count($children) : 0) . "\n";

// 继续测试其他方法...
?>
```

## ✅ 完成标志

在进入下一步之前，请确保你能够：

- [ ] 🔧 **方法掌握**：熟练使用所有8个核心方法
- [ ] 🧠 **递归理解**：理解递归在getAllDescendants()中的应用
- [ ] 💻 **代码调试**：能够调试和修改Tree类相关代码
- [ ] 🎯 **问题解决**：遇到问题知道如何排查和解决
- [ ] 📊 **数据处理**：能够处理各种复杂的树形数据

## 🧪 自我检测实验

### 实验1：递归理解测试
创建以下数据结构，然后用getAllDescendants()获取节点1的所有子孙：

```php
$data = array(
    1 => array('id' => 1, 'parentid' => 0, 'name' => 'A'),
    2 => array('id' => 2, 'parentid' => 1, 'name' => 'B'),
    3 => array('id' => 3, 'parentid' => 1, 'name' => 'C'),
    4 => array('id' => 4, 'parentid' => 2, 'name' => 'D'),
    5 => array('id' => 5, 'parentid' => 2, 'name' => 'E'),
    6 => array('id' => 6, 'parentid' => 3, 'name' => 'F')
);
```

**预期结果**：应该返回B、C、D、E、F（5个节点）

### 实验2：深度计算测试
使用上面的数据，计算每个节点的深度：
- A的深度应该是1
- B和C的深度应该是2  
- D、E、F的深度应该是3

### 实验3：树形文本生成测试
使用generateTreeText()生成树形文本，应该类似：
```
└── A
    ├── B
    │   ├── D
    │   └── E
    └── C
        └── F
```

## 🚀 准备进入下一步

完成本步骤学习后，你将进入：
**[📁 step3-application](../step3-application/)** - 实际应用，学习如何在真实项目中使用Tree类

## 💡 实践技巧

1. **多动手少看**：理论看一遍就够了，重点是多写代码
2. **故意制造问题**：通过错误来学习正确的用法
3. **对比输出结果**：修改数据后对比输出的变化
4. **记录疑问**：把不理解的地方记录下来
5. **尝试扩展**：在理解基础功能后，尝试添加新功能

## 🔧 调试技巧

```php
// 使用printData()方法查看数据结构
$tree->printData();

// 输出变量内容进行调试
var_dump($tree->getChildren(1));

// 使用条件输出调试信息
if ($debug) {
    echo "调试信息: 当前处理节点ID = $node_id\n";
}
```

---
📍 **当前位置**：第2步 - 动手实践  
⬅️ **上一步**：[第1步 - 基础概念](../step1-basics/README.md)  
⏭️ **下一步**：[第3步 - 实际应用](../step3-application/README.md)
