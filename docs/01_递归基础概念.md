# 第一章：递归基础概念

## 目录
- [什么是递归？](#什么是递归)
- [生活中的递归](#生活中的递归)
- [编程中的递归](#编程中的递归)
- [递归的三要素](#递归的三要素)
- [递归 vs 循环](#递归-vs-循环)
- [为什么要学习递归？](#为什么要学习递归)

---

## 什么是递归？

### 通俗定义
递归（Recursion）是一种解决问题的方法，它的核心思想是：**一个函数直接或间接地调用自己**。

想象一下俄罗斯套娃：打开一个套娃，里面还有一个小一点的套娃，再打开，里面还有更小的...直到最小的那个。递归就像是反过来的过程：从最小的问题开始，逐层解决，最终解决整个大问题。

### 技术定义
在编程中，递归是指一个函数在其函数体内调用自身的编程技巧。

```php
function 递归函数() {
    // 基础情况（终止条件）
    if (满足某个条件) {
        return 结果;
    }
    
    // 递归调用
    return 递归函数();
}
```

## 生活中的递归

在开始学习编程中的递归之前，让我们先看看生活中的递归例子：

### 1. 查字典
当你查字典时：
- 查找"递归"这个词
- 字典解释说："请参考递归的定义"
- 这就是一个递归的例子（虽然会让人抓狂）

### 2. 两面镜子相对
当两面镜子面对面放置时：
- 镜子A反射镜子B的影像
- 镜子B反射镜子A的影像（包含了B的影像）
- 形成无限的镜像递归

### 3. 讲故事
```
从前有座山，山里有座庙，庙里有个老和尚在给小和尚讲故事：
"从前有座山，山里有座庙，庙里有个老和尚在给小和尚讲故事：
  '从前有座山，山里有座庙...'"
```

### 4. 文件夹结构
电脑中的文件夹可以包含子文件夹，子文件夹又可以包含更多的子文件夹...

## 编程中的递归

### 第一个递归示例：倒计时

```php
<?php
// 最简单的递归：倒计时
function countdown($n) {
    // 基础情况：当 n 为 0 时停止
    if ($n <= 0) {
        echo "发射！🚀\n";
        return;
    }
    
    // 打印当前数字
    echo $n . "...\n";
    
    // 递归调用：用 n-1 继续倒计时
    countdown($n - 1);
}

// 测试
countdown(5);
```

输出：
```
5...
4...
3...
2...
1...
发射！🚀
```

### 执行流程图解

```
countdown(5) 调用
    │
    ├─ 打印 "5..."
    │
    └─ countdown(4) 调用
            │
            ├─ 打印 "4..."
            │
            └─ countdown(3) 调用
                    │
                    ├─ 打印 "3..."
                    │
                    └─ countdown(2) 调用
                            │
                            ├─ 打印 "2..."
                            │
                            └─ countdown(1) 调用
                                    │
                                    ├─ 打印 "1..."
                                    │
                                    └─ countdown(0) 调用
                                            │
                                            └─ 打印 "发射！🚀" (返回)
```

## 递归的三要素

任何递归函数都必须包含以下三个要素：

### 1. 基础情况（Base Case）
- 递归终止的条件
- 防止无限递归
- 通常是问题的最简单情况

```php
if ($n <= 0) {  // 这就是基础情况
    return;
}
```

### 2. 递归调用（Recursive Call）
- 函数调用自身
- 每次调用时问题规模要缩小

```php
countdown($n - 1);  // 递归调用，注意参数变小了
```

### 3. 递归前进（Progress Toward Base Case）
- 每次递归都要向基础情况靠近
- 确保最终能到达基础情况

```php
$n - 1  // 每次减1，最终会到达0
```

## 递归 vs 循环

同样的问题，我们可以用循环解决：

### 循环版本
```php
function countdown_loop($n) {
    for ($i = $n; $i > 0; $i--) {
        echo $i . "...\n";
    }
    echo "发射！🚀\n";
}
```

### 对比

| 特点 | 递归 | 循环 |
|------|------|------|
| 代码简洁性 | 通常更简洁优雅 | 有时较冗长 |
| 可读性 | 对某些问题更直观 | 对简单迭代更直观 |
| 性能 | 可能有栈溢出风险 | 通常更高效 |
| 内存使用 | 使用调用栈，占用较多 | 占用较少 |
| 适用场景 | 树形结构、分治问题 | 简单重复任务 |

## 为什么要学习递归？

### 1. 某些问题天然适合递归
- 树形结构遍历（文件系统、DOM树）
- 分治算法（快速排序、归并排序）
- 回溯算法（八皇后、数独）
- 动态规划问题

### 2. 提升编程思维
- 学会将大问题分解为小问题
- 培养抽象思维能力
- 理解函数式编程的核心概念

### 3. 面试常考
- 递归是技术面试的热门话题
- 考察候选人的问题解决能力
- 展示编程功底

### 4. 代码优雅
对比计算阶乘的两种方式：

**循环版本**：
```php
function factorial_loop($n) {
    $result = 1;
    for ($i = 1; $i <= $n; $i++) {
        $result *= $i;
    }
    return $result;
}
```

**递归版本**：
```php
function factorial($n) {
    if ($n <= 1) return 1;
    return $n * factorial($n - 1);
}
```

递归版本更接近数学定义：n! = n × (n-1)!

## 小结

1. **递归是什么**：函数调用自身的编程技巧
2. **三要素**：基础情况、递归调用、递归前进
3. **优点**：代码简洁、思路清晰、适合特定问题
4. **缺点**：可能效率较低、有栈溢出风险
5. **应用场景**：树形结构、分治问题、数学问题等

## 思考题

1. 为什么递归函数必须有基础情况？如果没有会发生什么？
2. 你能想到生活中还有哪些递归的例子吗？
3. 试着用递归的方式思考：如何计算 1+2+3+...+n 的和？

## 下一步

掌握了递归的基本概念后，下一章我们将深入探讨[递归的执行原理](02_递归执行原理.md)，了解递归在计算机内部是如何工作的。
